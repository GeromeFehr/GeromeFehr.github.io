<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Feedback – Lernstation Grafikkarte</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />
</head>
<body>
  <header>
    <h1>Feedback – Lernstation Grafikkarte</h1>
    <nav>
      <a href="index.html">Startseite</a>
      <a href="grundlagen.html">Grundlagen</a>
      <a href="kennzahlen.html">Kennzahlen</a>
      <a href="aufbau.html">Aufbau</a>
      <a href="quiz.html">Quiz</a>
      <a href="feedback.html">Feedback</a>
    </nav>
  </header>

  <main>
    <section class="card">
      <span class="badge">Feedback</span>
      <h2>Übersicht der gespeicherten Bewertungen</h2>
      <p>
        Hier siehst du die Bewertungen, die auf diesem Gerät im Browser
        gespeichert wurden. Die Daten werden im LocalStorage unter
        <code>gpu_lernstation_ratings</code> abgelegt.
      </p>

      <p><b>Anzahl Bewertungen:</b> <span id="rating-count">0</span></p>
      <p><b>Durchschnittliche Bewertung:</b> <span id="rating-average">-</span></p>

      <h3>Alle gespeicherten Bewertungen:</h3>
      <ul id="rating-list"></ul>

      <button id="reset-btn">Alle Bewertungen auf diesem Gerät löschen</button>

      <div class="highlight">
        Hinweis: Die Bewertungen sind nur lokal auf diesem Gerät gespeichert.
        Wenn du den Browser-Cache oder Websitedaten löschst, verschwinden sie.
      </div>
    </section>
  </main>

  <footer>
    Lernzirkel LF02 – Hardwarekomponenten · Komponente: Grafikkarte von Gérôme Fehr & Hüseyin Özdemit
  </footer>

  <script>
    (function () {
      var ratings;
      try {
        ratings = JSON.parse(localStorage.getItem("gpu_lernstation_ratings") || "[]");
      } catch (e) {
        ratings = [];
      }

      var countSpan = document.getElementById("rating-count");
      var avgSpan = document.getElementById("rating-average");
      var list = document.getElementById("rating-list");
      var resetBtn = document.getElementById("reset-btn");

      if (!ratings || ratings.length === 0) {
        countSpan.textContent = "0";
        avgSpan.textContent = "-";
        list.innerHTML = "<li>Noch keine Bewertungen gespeichert.</li>";
      } else {
        countSpan.textContent = String(ratings.length);
        var sum = 0;
        for (var i = 0; i < ratings.length; i++) {
          sum += ratings[i];
        }
        var avg = sum / ratings.length;
        avgSpan.textContent = avg.toFixed(2) + " von 5";

        for (var j = 0; j < ratings.length; j++) {
          var li = document.createElement("li");
          li.textContent = "Bewertung " + (j + 1) + ": " + ratings[j] + " von 5";
          list.appendChild(li);
        }
      }

      if (resetBtn) {
        resetBtn.addEventListener("click", function () {
          localStorage.removeItem("gpu_lernstation_ratings");
          location.reload();
        });
      }
    })();
  </script>
</body>
</html>
